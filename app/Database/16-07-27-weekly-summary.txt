16-07-27 Weekly summary (brief).

I have a more detailed log of the issues I ran into this week, which I will share at our next meeting.
However, I just wanted to provide a quick update in advance on what I encountered:

Goal: in Tables.hs, introduce more foreign key constraints to Courses table; use breadth and distribution tables. 

Issues:
- Could define Primary keys and unique keys in Breadth and Distribtion tables, but could not introduce them as foreign keys in Courses table (yet).

-Reasons: 
- Nullable fields are not allowed in fields that have a uniqueness constraint. Course data structure takes types Maybe T.Text for breadth, dist. This is used in other areas such as app/WebParsing/ParsingHelp (on emptyCourse for example), and in parsing (CoursePart). Possibility that changing will involve a lot of ricocheting changes.
- However Breadth and Distribution fields are Int not null and Varchar not null, so there is still possibility to use either field as a key somehow. 
(But: Interesting note: it seems that Breadth (for example) creates 12 fields rather than 6 in the database; each item (bId, description) happens twice, so there are 2 (1) Humanities, (2) Social Science or whatever the columns are called, for a total of 12 entries not 6. (Is that intentional)? This means that bId is not a unique field...)
- Making the Description field a primary key and introducing it as a foreign key in Courses results in a type error:

          fieldType mismatch: FTTypeCon (Just "T") "Text", FTTypeCon Nothing "String"
  despite the fact that strings are overloaded. So this may be a helper function situation (need case ...of ...?).

It seems like the options/steps are:
 - make breadth, distribution non-nullable fields
 - either make the primary keys of distribution and breadth tables Strings (description), which is more in keeping with current Couse datatype but may have worse performance (int key > string key for performance), or make the primary keys the bIds but change the type of breadth, dist in Courses table to 'int'. Either way, parsing in app/WebParsing/ParsingHelp.hs will be affected.
